@model Nsl_Core.Models.Dtos.Website.ArticleDto
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewData["Title"] = "ArticleUpdate";
    Layout = "~/Views/Shared/_BackLayout.cshtml";
}

<!-- Title -->
<section>
    <div class="backplatform-page">
        <!-- navbar -->
        <div class="open-sidenav-btn" id="navbarOpen">
            &#9776;
        </div>


        <div class="backplatform-main">
            <div class="backplatform-title">
                <h2 id="backTitle">最新消息維護</h2>
            </div>

        </div>
        <hr />
        <div class="container">
            <form name="formData" enctype="multipart/form-data" method="post">
                <input type="hidden" name="Id" value="@Model.Id" />
                <div class="mt-3 my-5">
                    <p class="me-2 p-backmember mt-5" style="font-weight: bolder">標題：</p>
                    <input type="text" class="form-control" id="title" placeholder="請輸入標題"
                           style="display: inline-block; width:100%" value='@Model.Title' name="Title" />
                </div>

                <div>
                    <div class="my-3 my-5">
                        <p class="me-2 p-backmember" style="font-weight: bolder">封面圖片：</p>
                        <input type="file" id="file" name="Picture" />
                    </div>
                    <div>
                        <div>
                            <img id="img" src='@Url.Content("~/picture/")@Model.Picture' class="pic-articleCAU"/>
                        </div>
                    </div>
                </div>

                <div class="my-3 my-5">
                    <p class="me-2 p-backmember" style="font-weight: bolder">內文：</p>
                    <textarea name="ArticleContent" class="form-control div-article-textarea">@Model.ArticleContent</textarea>
                </div>
                <div class="">
                    <!-- 這裡要改，返回上一頁，或是引導到教師頁面 -->
                    <button type="submit" class="btn btn-primary" id="submit">儲存</button>
                    <!-- 這裡要改，返回上一頁，或是引導到教師頁面 -->
                    <a class="btn btn-primary" href="~/BackMaintain/ArticleIndex">取消</a>
                </div>
            </form>
        </div>
    </div>
</section>

@section Scripts{
    <script>
        const file = document.querySelector("#file")
        const img = document.querySelector("#img")
        const submit = document.querySelector("#submit")

        $("#file").on('change', function (e) {
            const file = this.files[0];
            if (onchange == null) {
                $("#img").attr("src", null);
            }
            const fr = new FileReader();
            fr.onload = function (e) {
                $("#img").attr("src", e.target.result);
            };

            fr.readAsDataURL(file);
        });
    </script>
}

